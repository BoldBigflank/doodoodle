extends layout
block stylesheets

block content
  .div(ng-controller='GameCtrl')
    script.
      var isPlayer= #{isPlayer};
    .row.row-offcanvas.row-offcanvas-right
        .col-sm-12.col-md-9
          p.pull-right.visible-xs
            button.btn.btn-primary.btn-xs(type='button', data-toggle='offcanvas') Scores
          
          div
            //- canvas.drawing(width=450, height=600, drawing, resize, scale=0.5, ng-style="style()")
            
            //- Host display
            div.row(ng-show="!isPlayer")
              .col-sm-3
                h1(ng-show="game.state.name == 'prep'")
                  a(href="/player")
                    button.btn.btn-warning.btn-xs(type='button') Oops, I'm a player!
              .col-sm-6.text-center
                h1 Doodoodle
              .col-sm-3.text-right
                h1
                  small Room {{game.room}}

            //- Host Controls
            div.row(ng-show="!isPlayer")
              div.col-sm-12.text-center(ng-show="game.state.name == 'prep'")
                h2 Preparation
                h3 Go to 
                  strong http://qu.izti.me
                h3 Join room 
                  strong {{game.room}}
              div.col-sm-12.text-center(ng-show="game.state.name == 'draw'")
                h2 Draw Phase
                h3 On your device, add to the picture
                h4 Make it funny, cool, whatever

            //- Player Controls
            div.row(ng-show="isPlayer")
              //- Pre-Game setup
              form(ng-show="!game", name="playerForm")
                h1 Doodoodle
                h2 Join a game here
                a(href="/host")
                  button.btn.btn-warning.btn-xs(type='button') Wait, I'm a host!
                .form-group
                  label(for='inputName') Name
                  input#inputName.form-control(name="inputName", ng-model="joinData.name", type='text', placeholder='Name', required)
                  p {{playerName}}
                .form-group
                  label(for='inputRoom') Room
                  input#inputRoom.form-control(ng-model="joinData.room", type='text', placeholder='XXXX', required, ng-minlength=4, ng-maxlength=4, ng-patterh="[A-Z]", maxlength=4)
                  p {{room}}
                button.btn.btn-block.btn-default.text-uppercase(ng-click="startPlayer()",type='submit', ng-disabled="playerForm.$invalid") Go
                p
                  div.alert.alert-danger.error(ng-show="error") {{error}}
              //- Game controls
              div.controls(ng-show="game && game.state")
                //- Prep
                .prep-buttons(ng-show="game.state.name == 'prep'", state="prep")
                  h3 When everyone is in, press Start
                  button.btn.btn-block.btn-default.text-uppercase(ng-click="action('start')",type='submit') Start
                //- Draw
                .header(ng-show="game.state.name == 'draw'", state="draw")
                  .progress
                    .progress-bar(role="progressbar")
                  h3.text-center Draw
                  .cols-sm-12
                    canvas.drawing(width=450, height=600, drawing, resize, scale=0.75, ng-style="style()")
                  button.btn.btn-block.btn-default.text-uppercase(ng-click="submitPicture()",type='submit') Submit
                  p {{linesArray}}
                //- Vote
                .draw(ng-show="game.state.name == 'vote'", state="vote")
                  .col-md-6
                    canvas.drawing(width=450, height=600, drawing, resize, scale=0.4, position=1 ng-style="style()")
                  .col-md-6
                    canvas.drawing(width=450, height=600, drawing, resize, scale=0.4, position=2 ng-style="style()")
                //- Result
                .draw-buttons(ng-show="game.state.name == 'result'", state="result")
                  | Result buttons          
        #sidebar.col-sm-6.col-md-3.sidebar-offcanvas
          h2 Players
          .list-group
            a.list-group-item.active(ng-repeat='p in game.players') Player {{p.name}}
            
    hr
    |       
    footer
      p &copy; Alex Swan 2015

  block scripts
